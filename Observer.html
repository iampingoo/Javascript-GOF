<html>
<head>
<script src="/js/jquery.min.js"></script>
<script src="Observers.js"></script>
</head>
<body>
<h1>Learning JavaScript Design Patterns ISBN978-4-87311-618-1</h1> 
<button id="addNewObserver">Add New Observer checkbox</button>
<input id="mainCheckbox" type="checkbox"/>
<div id="observersContainer"></div>
<script>
    $(() => {
        const controlCheckbox = $( "#mainCheckbox" )[ 0 ]
             ,container  = $( "#observersContainer" )[ 0 ];

        extend( new Subject() ,controlCheckbox );
        $( "#mainCheckbox" ).on( 'click' ,( e ) => {
            $( "#mainCheckbox" )[ 0 ].Notify( $( "#mainCheckbox" )[ 0 ].checked );
        });

        $( "#addNewObserver" ).on( 'click' ,AddNewObserver );

        function AddNewObserver() {
            const check = $( "<input>" ,{ type: "checkbox" } ).appendTo( container )[ 0 ];

            extend( new Observer(), check );
            check.Update = ( value ) => {
                check.checked = value;
            };
            $( "#mainCheckbox" )[ 0 ].AddObserver( check );
        };
    });
</script>
</body>
</html>
